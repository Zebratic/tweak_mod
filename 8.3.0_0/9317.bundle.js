(self.webpackChunktweak=self.webpackChunktweak||[]).push([[9317],{9317:(e,t,n)=>{n.r(t),n.d(t,{CoreEditingCommands:()=>y,CoreEditorCommand:()=>w,CoreNavigationCommands:()=>v,EditorScroll_:()=>L,RevealLine_:()=>b});var o=n(3580),i=n(6268),r=n(8401),s=n(5152),u=n(6830),a=n(1640),l=n(5343),c=n(187),d=n(4314);class m{static columnSelect(e,t,n,o,i,r){const s=Math.abs(i-n)+1,u=n>i,a=o>r,m=o<r,p=[];for(let i=0;i<s;i++){const s=n+(u?-i:i),g=e.columnFromVisibleColumn(t,s,o),h=e.columnFromVisibleColumn(t,s,r),f=e.visibleColumnFromColumn(t,new c.L(s,g)),C=e.visibleColumnFromColumn(t,new c.L(s,h));if(m){if(f>r)continue;if(C<o)continue}if(a){if(C>o)continue;if(f<r)continue}p.push(new l.rS(new d.e(s,g,s,g),0,new c.L(s,h),0))}if(0===p.length)for(let e=0;e<s;e++){const o=n+(u?-e:e),i=t.getLineMaxColumn(o);p.push(new l.rS(new d.e(o,i,o,i),0,new c.L(o,i),0))}return{viewStates:p,reversed:u,fromLineNumber:n,fromVisualColumn:o,toLineNumber:i,toVisualColumn:r}}static columnSelectLeft(e,t,n){let o=n.toViewVisualColumn;return o>0&&o--,m.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,o)}static columnSelectRight(e,t,n){let o=0;const i=Math.min(n.fromViewLineNumber,n.toViewLineNumber),r=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let n=i;n<=r;n++){const i=t.getLineMaxColumn(n),r=e.visibleColumnFromColumn(t,new c.L(n,i));o=Math.max(o,r)}let s=n.toViewVisualColumn;return s<o&&s++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,s)}static columnSelectUp(e,t,n,o){const i=o?e.pageSize:1,r=Math.max(1,n.toViewLineNumber-i);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}static columnSelectDown(e,t,n,o){const i=o?e.pageSize:1,r=Math.min(t.getLineCount(),n.toViewLineNumber+i);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}}var p=n(9436),g=n(8108),h=n(1336),f=n(9102),C=n(8819),S=n(9989);class w extends u._l{runEditorCommand(e,t,n){const o=t._getViewModel();o&&this.runCoreEditorCommand(o,n||{})}}var L,b,v;!function(e){e.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory direction value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'up', 'down'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n\t\t\t\t",constraint:function(e){if(!r.Kn(e))return!1;const t=e;return!!r.HD(t.to)&&(!(!r.o8(t.by)&&!r.HD(t.by))&&(!(!r.o8(t.value)&&!r.hj(t.value))&&!(!r.o8(t.revealCursor)&&!r.jn(t.revealCursor))))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},e.RawDirection={Up:"up",Down:"down"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor"},e.parse=function(t){let n,o;switch(t.to){case e.RawDirection.Up:n=1;break;case e.RawDirection.Down:n=2;break;default:return null}switch(t.by){case e.RawUnit.Line:o=1;break;case e.RawUnit.WrappedLine:o=2;break;case e.RawUnit.Page:o=3;break;case e.RawUnit.HalfPage:o=4;break;case e.RawUnit.Editor:o=5;break;default:o=2}return{direction:n,unit:o,value:Math.floor(t.value||1),revealCursor:!!t.revealCursor,select:!!t.select}}}(L||(L={})),function(e){e.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'lineNumber': A mandatory line number value.\n\t\t\t\t\t* 'at': Logical position at which line has to be revealed.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'top', 'center', 'bottom'\n\t\t\t\t\t\t```\n\t\t\t\t",constraint:function(e){if(!r.Kn(e))return!1;const t=e;return!(!r.hj(t.lineNumber)&&!r.HD(t.lineNumber))&&!(!r.o8(t.at)&&!r.HD(t.at))},schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},e.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}}(b||(b={}));class N{constructor(e){e.addImplementation(1e4,"code-editor",((e,t)=>{const n=e.get(a.$).getFocusedCodeEditor();return!(!n||!n.hasTextFocus())&&this._runEditorCommand(e,n,t)})),e.addImplementation(1e3,"generic-dom-input-textarea",((e,t)=>{const n=document.activeElement;return!!(n&&["input","textarea"].indexOf(n.tagName.toLowerCase())>=0)&&(this.runDOMCommand(),!0)})),e.addImplementation(0,"generic-dom",((e,t)=>{const n=e.get(a.$).getActiveCodeEditor();return!!n&&(n.focus(),this._runEditorCommand(e,n,t))}))}_runEditorCommand(e,t,n){const o=this.runEditorCommand(e,t,n);return o||!0}}!function(e){class t extends w{constructor(e){super(e),this._minimalReveal=e.minimalReveal,this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement();e.setCursorStates(t.source,3,[g.P.moveTo(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)])&&e.revealPrimaryCursor(t.source,!0,this._minimalReveal)}}e.MoveTo=(0,u.fK)(new t({id:"_moveTo",minimalReveal:!0,inSelectionMode:!1,precondition:void 0})),e.MoveToSelect=(0,u.fK)(new t({id:"_moveToSelect",minimalReveal:!1,inSelectionMode:!0,precondition:void 0}));class n extends w{runCoreEditorCommand(e,t){e.model.pushStackElement();const n=this._getColumnSelectResult(e,e.getPrimaryCursorState(),e.getCursorColumnSelectData(),t);e.setCursorStates(t.source,3,n.viewStates.map((e=>l.Vi.fromViewState(e)))),e.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:n.fromLineNumber,fromViewVisualColumn:n.fromVisualColumn,toViewLineNumber:n.toLineNumber,toViewVisualColumn:n.toVisualColumn}),n.reversed?e.revealTopMostCursor(t.source):e.revealBottomMostCursor(t.source)}}e.ColumnSelect=(0,u.fK)(new class extends n{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(e,t,n,o){const i=e.model.validatePosition(o.position),r=e.coordinatesConverter.validateViewPosition(new c.L(o.viewPosition.lineNumber,o.viewPosition.column),i),s=o.doColumnSelect?n.fromViewLineNumber:r.lineNumber,u=o.doColumnSelect?n.fromViewVisualColumn:o.mouseColumn-1;return m.columnSelect(e.cursorConfig,e,s,u,r.lineNumber,o.mouseColumn-1)}}),e.CursorColumnSelectLeft=(0,u.fK)(new class extends n{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(e,t,n,o){return m.columnSelectLeft(e.cursorConfig,e,n)}}),e.CursorColumnSelectRight=(0,u.fK)(new class extends n{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(e,t,n,o){return m.columnSelectRight(e.cursorConfig,e,n)}});class r extends n{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,t,n,o){return m.columnSelectUp(e.cursorConfig,e,n,this._isPaged)}}e.CursorColumnSelectUp=(0,u.fK)(new r({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:3600,linux:{primary:0}}})),e.CursorColumnSelectPageUp=(0,u.fK)(new r({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:3595,linux:{primary:0}}}));class a extends n{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,t,n,o){return m.columnSelectDown(e.cursorConfig,e,n,this._isPaged)}}e.CursorColumnSelectDown=(0,u.fK)(new a({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:3602,linux:{primary:0}}})),e.CursorColumnSelectPageDown=(0,u.fK)(new a({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:3596,linux:{primary:0}}}));class p extends w{constructor(){super({id:"cursorMove",precondition:void 0,description:g.N.description})}runCoreEditorCommand(e,t){const n=g.N.parse(t);n&&this._runCursorMove(e,t.source,n)}_runCursorMove(e,t,n){e.model.pushStackElement(),e.setCursorStates(t,3,p._move(e,e.getCursorStates(),n)),e.revealPrimaryCursor(t,!0)}static _move(e,t,n){const o=n.select,i=n.value;switch(n.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return g.P.simpleMove(e,t,n.direction,o,i,n.unit);case 11:case 13:case 12:case 14:return g.P.viewportMove(e,t,n.direction,o,i);default:return null}}}e.CursorMoveImpl=p,e.CursorMove=(0,u.fK)(new p);class h extends w{constructor(e){super(e),this._staticArgs=e.args}runCoreEditorCommand(e,t){let n=this._staticArgs;-1===this._staticArgs.value&&(n={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:t.pageSize||e.cursorConfig.pageSize}),e.model.pushStackElement(),e.setCursorStates(t.source,3,g.P.simpleMove(e,e.getCursorStates(),n.direction,n.select,n.value,n.unit)),e.revealPrimaryCursor(t.source,!0)}}e.CursorLeft=(0,u.fK)(new h({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),e.CursorLeftSelect=(0,u.fK)(new h({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:1039}})),e.CursorRight=(0,u.fK)(new h({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),e.CursorRightSelect=(0,u.fK)(new h({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:1041}})),e.CursorUp=(0,u.fK)(new h({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),e.CursorUpSelect=(0,u.fK)(new h({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),e.CursorPageUp=(0,u.fK)(new h({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:11}})),e.CursorPageUpSelect=(0,u.fK)(new h({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:1035}})),e.CursorDown=(0,u.fK)(new h({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),e.CursorDownSelect=(0,u.fK)(new h({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),e.CursorPageDown=(0,u.fK)(new h({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:12}})),e.CursorPageDownSelect=(0,u.fK)(new h({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:1036}})),e.CreateCursor=(0,u.fK)(new class extends w{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(e,t){let n;n=t.wholeLine?g.P.line(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition):g.P.moveTo(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition);const o=e.getCursorStates();if(o.length>1){const i=n.modelState?n.modelState.position:null,r=n.viewState?n.viewState.position:null;for(let n=0,s=o.length;n<s;n++){const s=o[n];if((!i||s.modelState.selection.containsPosition(i))&&(!r||s.viewState.selection.containsPosition(r)))return o.splice(n,1),e.model.pushStackElement(),void e.setCursorStates(t.source,3,o)}}o.push(n),e.model.pushStackElement(),e.setCursorStates(t.source,3,o)}}),e.LastCursorMoveToSelect=(0,u.fK)(new class extends w{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(e,t){const n=e.getLastAddedCursorIndex(),o=e.getCursorStates(),i=o.slice(0);i[n]=g.P.moveTo(e,o[n],!0,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,i)}});class C extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,g.P.moveToBeginningOfLine(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}e.CursorHome=(0,u.fK)(new C({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),e.CursorHomeSelect=(0,u.fK)(new C({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class S extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}_exec(e){const t=[];for(let n=0,o=e.length;n<o;n++){const o=e[n],i=o.modelState.position.lineNumber;t[n]=l.Vi.fromModelState(o.modelState.move(this._inSelectionMode,i,1,0))}return t}}e.CursorLineStart=(0,u.fK)(new S({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:0,mac:{primary:287}}})),e.CursorLineStartSelect=(0,u.fK)(new S({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:0,mac:{primary:1311}}}));class v extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,g.P.moveToEndOfLine(e,e.getCursorStates(),this._inSelectionMode,t.sticky||!1)),e.revealPrimaryCursor(t.source,!0)}}e.CursorEnd=(0,u.fK)(new v({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:f.u.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:o.NC("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),e.CursorEndSelect=(0,u.fK)(new v({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:f.u.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:o.NC("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class _ extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e,e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}_exec(e,t){const n=[];for(let o=0,i=t.length;o<i;o++){const i=t[o],r=i.modelState.position.lineNumber,s=e.model.getLineMaxColumn(r);n[o]=l.Vi.fromModelState(i.modelState.move(this._inSelectionMode,r,s,0))}return n}}e.CursorLineEnd=(0,u.fK)(new _({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:0,mac:{primary:291}}})),e.CursorLineEndSelect=(0,u.fK)(new _({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:0,mac:{primary:1315}}}));class P extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,g.P.moveToBeginningOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}e.CursorTop=(0,u.fK)(new P({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:2062,mac:{primary:2064}}})),e.CursorTopSelect=(0,u.fK)(new P({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:3086,mac:{primary:3088}}}));class E extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,g.P.moveToEndOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}e.CursorBottom=(0,u.fK)(new E({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:2061,mac:{primary:2066}}})),e.CursorBottomSelect=(0,u.fK)(new E({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:3085,mac:{primary:3090}}}));class y extends w{constructor(){super({id:"editorScroll",precondition:void 0,description:L.description})}runCoreEditorCommand(e,t){const n=L.parse(t);n&&this._runEditorScroll(e,t.source,n)}_runEditorScroll(e,t,n){const o=this._computeDesiredScrollTop(e,n);if(n.revealCursor){const i=e.getCompletelyVisibleViewRangeAtScrollTop(o);e.setCursorStates(t,3,[g.P.findPositionInViewportIfOutside(e,e.getPrimaryCursorState(),i,n.select)])}e.viewLayout.setScrollPosition({scrollTop:o},0)}_computeDesiredScrollTop(e,t){if(1===t.unit){const n=e.getCompletelyVisibleViewRange(),o=e.coordinatesConverter.convertViewRangeToModelRange(n);let i;i=1===t.direction?Math.max(1,o.startLineNumber-t.value):Math.min(e.model.getLineCount(),o.startLineNumber+t.value);const r=e.coordinatesConverter.convertModelPositionToViewPosition(new c.L(i,1));return e.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber)}if(5===t.unit){let n=0;return 2===t.direction&&(n=e.model.getLineCount()-e.cursorConfig.pageSize),e.viewLayout.getVerticalOffsetForLineNumber(n)}let n;n=3===t.unit?e.cursorConfig.pageSize*t.value:4===t.unit?Math.round(e.cursorConfig.pageSize/2)*t.value:t.value;const o=(1===t.direction?-1:1)*n;return e.viewLayout.getCurrentScrollTop()+o*e.cursorConfig.lineHeight}}e.EditorScrollImpl=y,e.EditorScroll=(0,u.fK)(new y),e.ScrollLineUp=(0,u.fK)(new class extends w{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(t,n){e.EditorScroll._runEditorScroll(t,n.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),e.ScrollPageUp=(0,u.fK)(new class extends w{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(t,n){e.EditorScroll._runEditorScroll(t,n.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),e.ScrollEditorTop=(0,u.fK)(new class extends w{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus}})}runCoreEditorCommand(t,n){e.EditorScroll._runEditorScroll(t,n.source,{direction:1,unit:5,value:1,revealCursor:!1,select:!1})}}),e.ScrollLineDown=(0,u.fK)(new class extends w{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(t,n){e.EditorScroll._runEditorScroll(t,n.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),e.ScrollPageDown=(0,u.fK)(new class extends w{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(t,n){e.EditorScroll._runEditorScroll(t,n.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}}),e.ScrollEditorBottom=(0,u.fK)(new class extends w{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus}})}runCoreEditorCommand(t,n){e.EditorScroll._runEditorScroll(t,n.source,{direction:2,unit:5,value:1,revealCursor:!1,select:!1})}});class x extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[g.P.word(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position)]),e.revealPrimaryCursor(t.source,!0)}}e.WordSelect=(0,u.fK)(new x({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),e.WordSelectDrag=(0,u.fK)(new x({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),e.LastCursorWordSelect=(0,u.fK)(new class extends w{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(e,t){const n=e.getLastAddedCursorIndex(),o=e.getCursorStates(),i=o.slice(0),r=o[n];i[n]=g.P.word(e,r,r.modelState.hasSelection(),t.position),e.model.pushStackElement(),e.setCursorStates(t.source,3,i)}});class k extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[g.P.line(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)]),e.revealPrimaryCursor(t.source,!1)}}e.LineSelect=(0,u.fK)(new k({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),e.LineSelectDrag=(0,u.fK)(new k({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class T extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){const n=e.getLastAddedCursorIndex(),o=e.getCursorStates(),i=o.slice(0);i[n]=g.P.line(e,o[n],this._inSelectionMode,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,i)}}e.LastCursorLineSelect=(0,u.fK)(new T({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),e.LastCursorLineSelectDrag=(0,u.fK)(new T({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),e.CancelSelection=(0,u.fK)(new class extends w{constructor(){super({id:"cancelSelection",precondition:f.u.hasNonEmptySelection,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[g.P.cancelSelection(e,e.getPrimaryCursorState())]),e.revealPrimaryCursor(t.source,!0)}}),e.RemoveSecondaryCursors=(0,u.fK)(new class extends w{constructor(){super({id:"removeSecondaryCursors",precondition:f.u.hasMultipleSelections,kbOpts:{weight:1,kbExpr:f.u.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[e.getPrimaryCursorState()]),e.revealPrimaryCursor(t.source,!0),(0,s.i7)(o.NC("removedCursor","Removed secondary cursors"))}}),e.RevealLine=(0,u.fK)(new class extends w{constructor(){super({id:"revealLine",precondition:void 0,description:b.description})}runCoreEditorCommand(e,t){const n=t,o=n.lineNumber||0;let i="number"==typeof o?o+1:parseInt(o)+1;i<1&&(i=1);const r=e.model.getLineCount();i>r&&(i=r);const s=new d.e(i,1,i,e.model.getLineMaxColumn(i));let u=0;if(n.at)switch(n.at){case b.RawAtArgument.Top:u=3;break;case b.RawAtArgument.Center:u=1;break;case b.RawAtArgument.Bottom:u=4}const a=e.coordinatesConverter.convertModelRangeToViewRange(s);e.revealRange(t.source,!1,a,u,0)}}),e.SelectAll=new class extends N{constructor(){super(u.Sq)}runDOMCommand(){i.isFirefox&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(e,t,n){const o=t._getViewModel();o&&this.runCoreEditorCommand(o,n)}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates("keyboard",3,[g.P.selectAll(e,e.getPrimaryCursorState())])}},e.SetSelection=(0,u.fK)(new class extends w{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[l.Vi.fromModelSelection(t.selection)])}})}(v||(v={}));const _=C.Ao.and(f.u.textInputFocus,f.u.columnSelection);function P(e,t){S.W.registerKeybindingRule({id:e,primary:t,when:_,weight:1})}function E(e){return e.register(),e}var y;P(v.CursorColumnSelectLeft.id,1039),P(v.CursorColumnSelectRight.id,1041),P(v.CursorColumnSelectUp.id,1040),P(v.CursorColumnSelectPageUp.id,1035),P(v.CursorColumnSelectDown.id,1042),P(v.CursorColumnSelectPageDown.id,1036),function(e){class t extends u._l{runEditorCommand(e,t,n){const o=t._getViewModel();o&&this.runCoreEditingCommand(t,o,n||{})}}e.CoreEditingCommand=t,e.LineBreakInsert=(0,u.fK)(new class extends t{constructor(){super({id:"lineBreakInsert",precondition:f.u.writable,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(e,t,n){e.pushUndoStop(),e.executeCommands(this.id,h.u6.lineBreakInsert(t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection))))}}),e.Outdent=(0,u.fK)(new class extends t{constructor(){super({id:"outdent",precondition:f.u.writable,kbOpts:{weight:0,kbExpr:C.Ao.and(f.u.editorTextFocus,f.u.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(e,t,n){e.pushUndoStop(),e.executeCommands(this.id,h.u6.outdent(t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)))),e.pushUndoStop()}}),e.Tab=(0,u.fK)(new class extends t{constructor(){super({id:"tab",precondition:f.u.writable,kbOpts:{weight:0,kbExpr:C.Ao.and(f.u.editorTextFocus,f.u.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(e,t,n){e.pushUndoStop(),e.executeCommands(this.id,h.u6.tab(t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)))),e.pushUndoStop()}}),e.DeleteLeft=(0,u.fK)(new class extends t{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(e,t,n){const[o,i]=p.A.deleteLeft(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)),t.getCursorAutoClosedCharacters());o&&e.pushUndoStop(),e.executeCommands(this.id,i),t.setPrevEditOperationType(2)}}),e.DeleteRight=(0,u.fK)(new class extends t{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:0,kbExpr:f.u.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(e,t,n){const[o,i]=p.A.deleteRight(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)));o&&e.pushUndoStop(),e.executeCommands(this.id,i),t.setPrevEditOperationType(3)}}),e.Undo=new class extends N{constructor(){super(u.n_)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(e,t,n){if(t.hasModel()&&!0!==t.getOption(83))return t.getModel().undo()}},e.Redo=new class extends N{constructor(){super(u.kz)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(e,t,n){if(t.hasModel()&&!0!==t.getOption(83))return t.getModel().redo()}}}(y||(y={}));class x extends u.mY{constructor(e,t,n){super({id:e,precondition:void 0,description:n}),this._handlerId=t}runCommand(e,t){const n=e.get(a.$).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}function k(e,t){E(new x("default:"+e,e)),E(new x(e,e,t))}k("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),k("replacePreviousChar"),k("compositionType"),k("compositionStart"),k("compositionEnd"),k("paste"),k("cut")},291:(e,t,n)=>{n.d(t,{U:()=>p});var o=n(7295),i=n(7988),r=n(4314),s=n(3860),u=n(1615),a=n(1381),l=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},c=function(e,t){return function(n,o){t(n,o,e)}};const d=Object.create(null);function m(e,t){if(t<=0)return"";d[e]||(d[e]=["",e]);const n=d[e];for(let o=n.length;o<=t;o++)n[o]=n[o-1]+e;return n[t]}let p=class e{constructor(e,t,n){this._languageConfigurationService=n,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,n,o,r){const s=i.i.visibleColumnFromColumn(e,t,n);if(r){const e=m(" ",o);return m(e,i.i.prevIndentTabStop(s,o)/o)}return m("\t",i.i.prevRenderTabStop(s,n)/n)}static shiftIndent(e,t,n,o,r){const s=i.i.visibleColumnFromColumn(e,t,n);if(r){const e=m(" ",o);return m(e,i.i.nextIndentTabStop(s,o)/o)}return m("\t",i.i.nextRenderTabStop(s,n)/n)}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(t,n){const s=this._selection.startLineNumber;let a=this._selection.endLineNumber;1===this._selection.endColumn&&s!==a&&(a-=1);const{tabSize:l,indentSize:c,insertSpaces:d}=this._opts,p=s===a;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(t.getLineContent(s))&&(this._useLastEditRangeForCursorEndPosition=!0);let m=0,g=0;for(let h=s;h<=a;h++,m=g){g=0;const a=t.getLineContent(h);let f,C=o.LC(a);if((!this._opts.isUnshift||0!==a.length&&0!==C)&&(p||this._opts.isUnshift||0!==a.length)){if(-1===C&&(C=a.length),h>1){if(i.i.visibleColumnFromColumn(a,C+1,l)%c!=0&&t.tokenization.isCheapToTokenize(h-1)){const e=(0,u.A)(this._opts.autoIndent,t,new r.e(h-1,t.getLineMaxColumn(h-1),h-1,t.getLineMaxColumn(h-1)),this._languageConfigurationService);if(e){if(g=m,e.appendText)for(let t=0,n=e.appendText.length;t<n&&g<c&&32===e.appendText.charCodeAt(t);t++)g++;e.removeText&&(g=Math.max(0,g-e.removeText));for(let e=0;e<g&&(0!==C&&32===a.charCodeAt(C-1));e++)C--}}}this._opts.isUnshift&&0===C||(f=this._opts.isUnshift?e.unshiftIndent(a,C+1,l,c,d):e.shiftIndent(a,C+1,l,c,d),this._addEditOperation(n,new r.e(h,1,h,C+1),f),h!==s||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=this._selection.startColumn<=C+1))}}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&0===t.getLineLength(s)&&(this._useLastEditRangeForCursorEndPosition=!0);const e=d?m(" ",c):"\t";for(let i=s;i<=a;i++){const u=t.getLineContent(i);let a=o.LC(u);if((!this._opts.isUnshift||0!==u.length&&0!==a)&&((p||this._opts.isUnshift||0!==u.length)&&(-1===a&&(a=u.length),!this._opts.isUnshift||0!==a)))if(this._opts.isUnshift){a=Math.min(a,c);for(let e=0;e<a;e++){if(9===u.charCodeAt(e)){a=e+1;break}}this._addEditOperation(n,new r.e(i,1,i,a+1),"")}else this._addEditOperation(n,new r.e(i,1,i,1),e),i!==s||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=1===this._selection.startColumn)}}this._selectionId=n.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const e=t.getInverseEditOperations()[0];return new s.Y(e.range.endLineNumber,e.range.endColumn,e.range.endLineNumber,e.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const e=this._selection.startColumn;return n.startColumn<=e?n:0===n.getDirection()?new s.Y(n.startLineNumber,e,n.endLineNumber,n.endColumn):new s.Y(n.endLineNumber,n.endColumn,n.startLineNumber,e)}return n}};p=l([c(2,a.c_)],p)},7128:(e,t,n)=>{n.d(t,{l:()=>i});var o=n(7988);class i{static whitespaceVisibleColumn(e,t,n){const i=e.length;let r=0,s=-1,u=-1;for(let a=0;a<i;a++){if(a===t)return[s,u,r];r%n==0&&(s=a,u=r);switch(e.charCodeAt(a)){case 32:r+=1;break;case 9:r=o.i.nextRenderTabStop(r,n);break;default:return[-1,-1,-1]}}return t===i?[s,u,r]:[-1,-1,-1]}static atomicPosition(e,t,n,r){const s=e.length,[u,a,l]=i.whitespaceVisibleColumn(e,t,n);if(-1===l)return-1;let c;switch(r){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%n==0)return t;c=l%n<=n/2}if(c){if(-1===u)return-1;let t=a;for(let i=u;i<s;++i){if(t===a+n)return u;switch(e.charCodeAt(i)){case 32:t+=1;break;case 9:t=o.i.nextRenderTabStop(t,n);break;default:return-1}}return t===a+n?u:-1}const d=o.i.nextRenderTabStop(l,n);let m=l;for(let i=t;i<s;i++){if(m===d)return i;switch(e.charCodeAt(i)){case 32:m+=1;break;case 9:m=o.i.nextRenderTabStop(m,n);break;default:return-1}}return m===d?s:-1}}},9436:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(7295),i=n(1329),r=n(5343),s=n(7988),u=n(839),a=n(4314),l=n(187);class c{static deleteRight(e,t,n,o){const r=[];let s=3!==e;for(let e=0,l=o.length;e<l;e++){const l=o[e];let c=l;if(c.isEmpty()){const e=l.getPosition(),o=u.o.right(t,n,e);c=new a.e(o.lineNumber,o.column,e.lineNumber,e.column)}c.isEmpty()?r[e]=null:(c.startLineNumber!==c.endLineNumber&&(s=!0),r[e]=new i.T4(c,""))}return[s,r]}static isAutoClosingPairDelete(e,t,n,o,i,s,u){if("never"===t&&"never"===n)return!1;if("never"===e)return!1;for(let a=0,l=s.length;a<l;a++){const l=s[a],c=l.getPosition();if(!l.isEmpty())return!1;const d=i.getLineContent(c.lineNumber);if(c.column<2||c.column>=d.length+1)return!1;const m=d.charAt(c.column-2),p=o.get(m);if(!p)return!1;if((0,r.LN)(m)){if("never"===n)return!1}else if("never"===t)return!1;const g=d.charAt(c.column-1);let h=!1;for(const e of p)e.open===m&&e.close===g&&(h=!0);if(!h)return!1;if("auto"===e){let e=!1;for(let t=0,n=u.length;t<n;t++){const n=u[t];if(c.lineNumber===n.startLineNumber&&c.column===n.startColumn){e=!0;break}}if(!e)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){const o=[];for(let e=0,t=n.length;e<t;e++){const t=n[e].getPosition(),r=new a.e(t.lineNumber,t.column-1,t.lineNumber,t.column+1);o[e]=new i.T4(r,"")}return[!0,o]}static deleteLeft(e,t,n,o,r){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,o,r))return this._runAutoClosingPairDelete(t,n,o);const s=[];let u=2!==e;for(let e=0,r=o.length;e<r;e++){const r=c.getDeleteRange(o[e],n,t);r.isEmpty()?s[e]=null:(r.startLineNumber!==r.endLineNumber&&(u=!0),s[e]=new i.T4(r,""))}return[u,s]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const i=e.getPosition();if(n.useTabStops&&i.column>1){const e=t.getLineContent(i.lineNumber),r=o.LC(e),u=-1===r?e.length+1:r+1;if(i.column<=u){const e=n.visibleColumnFromColumn(t,i),o=s.i.prevIndentTabStop(e,n.indentSize),r=n.columnFromVisibleColumn(t,i.lineNumber,o);return new a.e(i.lineNumber,r,i.lineNumber,i.column)}}return a.e.fromPositions(c.getPositionAfterDeleteLeft(i,t),i)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=o.oH(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}if(e.lineNumber>1){const n=e.lineNumber-1;return new l.L(n,t.getLineMaxColumn(n))}return e}static cut(e,t,n){const o=[];let s=null;n.sort(((e,t)=>l.L.compare(e.getStartPosition(),t.getEndPosition())));for(let r=0,u=n.length;r<u;r++){const u=n[r];if(u.isEmpty())if(e.emptySelectionClipboard){const e=u.getPosition();let n,l,c,d;e.lineNumber<t.getLineCount()?(n=e.lineNumber,l=1,c=e.lineNumber+1,d=1):e.lineNumber>1&&(null==s?void 0:s.endLineNumber)!==e.lineNumber?(n=e.lineNumber-1,l=t.getLineMaxColumn(e.lineNumber-1),c=e.lineNumber,d=t.getLineMaxColumn(e.lineNumber)):(n=e.lineNumber,l=1,c=e.lineNumber,d=t.getLineMaxColumn(e.lineNumber));const m=new a.e(n,l,c,d);s=m,m.isEmpty()?o[r]=null:o[r]=new i.T4(m,"")}else o[r]=null;else o[r]=new i.T4(u,"")}return new r.Tp(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}},8108:(e,t,n)=>{n.d(t,{N:()=>o,P:()=>c});var o,i=n(8401),r=n(5343),s=n(839),u=n(2896),a=n(187),l=n(4314);class c{static addCursorDown(e,t,n){const o=[];let i=0;for(let u=0,a=t.length;u<a;u++){const a=t[u];o[i++]=new r.Vi(a.modelState,a.viewState),o[i++]=n?r.Vi.fromModelState(s.o.translateDown(e.cursorConfig,e.model,a.modelState)):r.Vi.fromViewState(s.o.translateDown(e.cursorConfig,e,a.viewState))}return o}static addCursorUp(e,t,n){const o=[];let i=0;for(let u=0,a=t.length;u<a;u++){const a=t[u];o[i++]=new r.Vi(a.modelState,a.viewState),o[i++]=n?r.Vi.fromModelState(s.o.translateUp(e.cursorConfig,e.model,a.modelState)):r.Vi.fromViewState(s.o.translateUp(e.cursorConfig,e,a.viewState))}return o}static moveToBeginningOfLine(e,t,n){const o=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];o[i]=this._moveToLineStart(e,r,n)}return o}static _moveToLineStart(e,t,n){const o=t.viewState.position.column,i=o===t.modelState.position.column,r=t.viewState.position.lineNumber,s=e.getLineFirstNonWhitespaceColumn(r);return i||o===s?this._moveToLineStartByModel(e,t,n):this._moveToLineStartByView(e,t,n)}static _moveToLineStartByView(e,t,n){return r.Vi.fromViewState(s.o.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return r.Vi.fromModelState(s.o.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,o){const i=[];for(let r=0,s=t.length;r<s;r++){const s=t[r];i[r]=this._moveToLineEnd(e,s,n,o)}return i}static _moveToLineEnd(e,t,n,o){const i=t.viewState.position,r=e.getLineMaxColumn(i.lineNumber),s=i.column===r,u=t.modelState.position,a=e.model.getLineMaxColumn(u.lineNumber),l=r-i.column==a-u.column;return s||l?this._moveToLineEndByModel(e,t,n,o):this._moveToLineEndByView(e,t,n,o)}static _moveToLineEndByView(e,t,n,o){return r.Vi.fromViewState(s.o.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,o))}static _moveToLineEndByModel(e,t,n,o){return r.Vi.fromModelState(s.o.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,o))}static expandLineSelection(e,t){const n=[];for(let o=0,i=t.length;o<i;o++){const i=t[o],s=i.modelState.selection.startLineNumber,u=e.model.getLineCount();let c,d=i.modelState.selection.endLineNumber;d===u?c=e.model.getLineMaxColumn(u):(d++,c=1),n[o]=r.Vi.fromModelState(new r.rS(new l.e(s,1,s,1),0,new a.L(d,c),0))}return n}static moveToBeginningOfBuffer(e,t,n){const o=[];for(let i=0,u=t.length;i<u;i++){const u=t[i];o[i]=r.Vi.fromModelState(s.o.moveToBeginningOfBuffer(e.cursorConfig,e.model,u.modelState,n))}return o}static moveToEndOfBuffer(e,t,n){const o=[];for(let i=0,u=t.length;i<u;i++){const u=t[i];o[i]=r.Vi.fromModelState(s.o.moveToEndOfBuffer(e.cursorConfig,e.model,u.modelState,n))}return o}static selectAll(e,t){const n=e.model.getLineCount(),o=e.model.getLineMaxColumn(n);return r.Vi.fromModelState(new r.rS(new l.e(1,1,1,1),0,new a.L(n,o),0))}static line(e,t,n,o,i){const s=e.model.validatePosition(o),u=i?e.coordinatesConverter.validateViewPosition(new a.L(i.lineNumber,i.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);if(!n||!t.modelState.hasSelection()){const t=e.model.getLineCount();let n=s.lineNumber+1,o=1;return n>t&&(n=t,o=e.model.getLineMaxColumn(n)),r.Vi.fromModelState(new r.rS(new l.e(s.lineNumber,1,n,o),0,new a.L(n,o),0))}const c=t.modelState.selectionStart.getStartPosition().lineNumber;if(s.lineNumber<c)return r.Vi.fromViewState(t.viewState.move(t.modelState.hasSelection(),u.lineNumber,1,0));if(s.lineNumber>c){const n=e.getLineCount();let o=u.lineNumber+1,i=1;return o>n&&(o=n,i=e.getLineMaxColumn(o)),r.Vi.fromViewState(t.viewState.move(t.modelState.hasSelection(),o,i,0))}{const e=t.modelState.selectionStart.getEndPosition();return r.Vi.fromModelState(t.modelState.move(t.modelState.hasSelection(),e.lineNumber,e.column,0))}}static word(e,t,n,o){const i=e.model.validatePosition(o);return r.Vi.fromModelState(u.w.word(e.cursorConfig,e.model,t.modelState,n,i))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new r.Vi(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,o=t.viewState.position.column;return r.Vi.fromViewState(new r.rS(new l.e(n,o,n,o),0,new a.L(n,o),0))}static moveTo(e,t,n,o,i){const s=e.model.validatePosition(o),u=i?e.coordinatesConverter.validateViewPosition(new a.L(i.lineNumber,i.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);return r.Vi.fromViewState(t.viewState.move(n,u.lineNumber,u.column,0))}static simpleMove(e,t,n,o,i,u){switch(n){case 0:return 4===u?this._moveHalfLineLeft(e,t,o):this._moveLeft(e,t,o,i);case 1:return 4===u?this._moveHalfLineRight(e,t,o):this._moveRight(e,t,o,i);case 2:return 2===u?this._moveUpByViewLines(e,t,o,i):this._moveUpByModelLines(e,t,o,i);case 3:return 2===u?this._moveDownByViewLines(e,t,o,i):this._moveDownByModelLines(e,t,o,i);case 4:return 2===u?t.map((t=>r.Vi.fromViewState(s.o.moveToPrevBlankLine(e.cursorConfig,e,t.viewState,o)))):t.map((t=>r.Vi.fromModelState(s.o.moveToPrevBlankLine(e.cursorConfig,e.model,t.modelState,o))));case 5:return 2===u?t.map((t=>r.Vi.fromViewState(s.o.moveToNextBlankLine(e.cursorConfig,e,t.viewState,o)))):t.map((t=>r.Vi.fromModelState(s.o.moveToNextBlankLine(e.cursorConfig,e.model,t.modelState,o))));case 6:return this._moveToViewMinColumn(e,t,o);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,o);case 8:return this._moveToViewCenterColumn(e,t,o);case 9:return this._moveToViewMaxColumn(e,t,o);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,o);default:return null}}static viewportMove(e,t,n,o,i){const r=e.getCompletelyVisibleViewRange(),s=e.coordinatesConverter.convertViewRangeToModelRange(r);switch(n){case 11:{const n=this._firstLineNumberInRange(e.model,s,i),r=e.model.getLineFirstNonWhitespaceColumn(n);return[this._moveToModelPosition(e,t[0],o,n,r)]}case 13:{const n=this._lastLineNumberInRange(e.model,s,i),r=e.model.getLineFirstNonWhitespaceColumn(n);return[this._moveToModelPosition(e,t[0],o,n,r)]}case 12:{const n=Math.round((s.startLineNumber+s.endLineNumber)/2),i=e.model.getLineFirstNonWhitespaceColumn(n);return[this._moveToModelPosition(e,t[0],o,n,i)]}case 14:{const n=[];for(let i=0,s=t.length;i<s;i++){const s=t[i];n[i]=this.findPositionInViewportIfOutside(e,s,r,o)}return n}default:return null}}static findPositionInViewportIfOutside(e,t,n,o){const i=t.viewState.position.lineNumber;if(n.startLineNumber<=i&&i<=n.endLineNumber-1)return new r.Vi(t.modelState,t.viewState);{let u;u=i>n.endLineNumber-1?n.endLineNumber-1:i<n.startLineNumber?n.startLineNumber:i;const a=s.o.vertical(e.cursorConfig,e,i,t.viewState.position.column,t.viewState.leftoverVisibleColumns,u,!1);return r.Vi.fromViewState(t.viewState.move(o,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let o=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(o)&&o++,Math.min(t.endLineNumber,o+n-1)}static _lastLineNumberInRange(e,t,n){let o=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(o)&&o++,Math.max(o,t.endLineNumber-n+1)}static _moveLeft(e,t,n,o){return t.map((t=>r.Vi.fromViewState(s.o.moveLeft(e.cursorConfig,e,t.viewState,n,o))))}static _moveHalfLineLeft(e,t,n){const o=[];for(let i=0,u=t.length;i<u;i++){const u=t[i],a=u.viewState.position.lineNumber,l=Math.round(e.getLineContent(a).length/2);o[i]=r.Vi.fromViewState(s.o.moveLeft(e.cursorConfig,e,u.viewState,n,l))}return o}static _moveRight(e,t,n,o){return t.map((t=>r.Vi.fromViewState(s.o.moveRight(e.cursorConfig,e,t.viewState,n,o))))}static _moveHalfLineRight(e,t,n){const o=[];for(let i=0,u=t.length;i<u;i++){const u=t[i],a=u.viewState.position.lineNumber,l=Math.round(e.getLineContent(a).length/2);o[i]=r.Vi.fromViewState(s.o.moveRight(e.cursorConfig,e,u.viewState,n,l))}return o}static _moveDownByViewLines(e,t,n,o){const i=[];for(let u=0,a=t.length;u<a;u++){const a=t[u];i[u]=r.Vi.fromViewState(s.o.moveDown(e.cursorConfig,e,a.viewState,n,o))}return i}static _moveDownByModelLines(e,t,n,o){const i=[];for(let u=0,a=t.length;u<a;u++){const a=t[u];i[u]=r.Vi.fromModelState(s.o.moveDown(e.cursorConfig,e.model,a.modelState,n,o))}return i}static _moveUpByViewLines(e,t,n,o){const i=[];for(let u=0,a=t.length;u<a;u++){const a=t[u];i[u]=r.Vi.fromViewState(s.o.moveUp(e.cursorConfig,e,a.viewState,n,o))}return i}static _moveUpByModelLines(e,t,n,o){const i=[];for(let u=0,a=t.length;u<a;u++){const a=t[u];i[u]=r.Vi.fromModelState(s.o.moveUp(e.cursorConfig,e.model,a.modelState,n,o))}return i}static _moveToViewPosition(e,t,n,o,i){return r.Vi.fromViewState(t.viewState.move(n,o,i,0))}static _moveToModelPosition(e,t,n,o,i){return r.Vi.fromModelState(t.modelState.move(n,o,i,0))}static _moveToViewMinColumn(e,t,n){const o=[];for(let i=0,r=t.length;i<r;i++){const r=t[i],s=r.viewState.position.lineNumber,u=e.getLineMinColumn(s);o[i]=this._moveToViewPosition(e,r,n,s,u)}return o}static _moveToViewFirstNonWhitespaceColumn(e,t,n){const o=[];for(let i=0,r=t.length;i<r;i++){const r=t[i],s=r.viewState.position.lineNumber,u=e.getLineFirstNonWhitespaceColumn(s);o[i]=this._moveToViewPosition(e,r,n,s,u)}return o}static _moveToViewCenterColumn(e,t,n){const o=[];for(let i=0,r=t.length;i<r;i++){const r=t[i],s=r.viewState.position.lineNumber,u=Math.round((e.getLineMaxColumn(s)+e.getLineMinColumn(s))/2);o[i]=this._moveToViewPosition(e,r,n,s,u)}return o}static _moveToViewMaxColumn(e,t,n){const o=[];for(let i=0,r=t.length;i<r;i++){const r=t[i],s=r.viewState.position.lineNumber,u=e.getLineMaxColumn(s);o[i]=this._moveToViewPosition(e,r,n,s,u)}return o}static _moveToViewLastNonWhitespaceColumn(e,t,n){const o=[];for(let i=0,r=t.length;i<r;i++){const r=t[i],s=r.viewState.position.lineNumber,u=e.getLineLastNonWhitespaceColumn(s);o[i]=this._moveToViewPosition(e,r,n,s,u)}return o}}!function(e){e.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory logical position value providing where to move the cursor.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',\n\t\t\t\t\t\t'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'\n\t\t\t\t\t\t'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'\n\t\t\t\t\t\t'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'character', 'halfLine'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'select': If 'true' makes the selection. Default is 'false'.\n\t\t\t\t",constraint:function(e){if(!i.Kn(e))return!1;const t=e;return!!i.HD(t.to)&&(!(!i.o8(t.select)&&!i.jn(t.select))&&(!(!i.o8(t.by)&&!i.HD(t.by))&&!(!i.o8(t.value)&&!i.hj(t.value))))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},e.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"},e.parse=function(t){if(!t.to)return null;let n;switch(t.to){case e.RawDirection.Left:n=0;break;case e.RawDirection.Right:n=1;break;case e.RawDirection.Up:n=2;break;case e.RawDirection.Down:n=3;break;case e.RawDirection.PrevBlankLine:n=4;break;case e.RawDirection.NextBlankLine:n=5;break;case e.RawDirection.WrappedLineStart:n=6;break;case e.RawDirection.WrappedLineFirstNonWhitespaceCharacter:n=7;break;case e.RawDirection.WrappedLineColumnCenter:n=8;break;case e.RawDirection.WrappedLineEnd:n=9;break;case e.RawDirection.WrappedLineLastNonWhitespaceCharacter:n=10;break;case e.RawDirection.ViewPortTop:n=11;break;case e.RawDirection.ViewPortBottom:n=13;break;case e.RawDirection.ViewPortCenter:n=12;break;case e.RawDirection.ViewPortIfOutside:n=14;break;default:return null}let o=0;switch(t.by){case e.RawUnit.Line:o=1;break;case e.RawUnit.WrappedLine:o=2;break;case e.RawUnit.Character:o=3;break;case e.RawUnit.HalfLine:o=4}return{direction:n,unit:o,select:!!t.select,value:t.value||1}}}(o||(o={}))},839:(e,t,n)=>{n.d(t,{o:()=>c});var o=n(5343),i=n(7988),r=n(187),s=n(4314),u=n(7295),a=n(7128);class l{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class c{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-u.HO(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new r.L(n,e.getLineMaxColumn(n))}return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const o=e.getLineMinColumn(t.lineNumber),i=e.getLineContent(t.lineNumber),s=a.l.atomicPosition(i,t.column-1,n,0);if(-1!==s&&s+1>=o)return new r.L(t.lineNumber,s+1)}return this.leftPosition(e,t)}static left(e,t,n){const o=e.stickyTabStops?c.leftPositionAtomicSoftTabs(t,n,e.tabSize):c.leftPosition(t,n);return new l(o.lineNumber,o.column,0)}static moveLeft(e,t,n,o,i){let r,s;if(n.hasSelection()&&!o)r=n.selection.startLineNumber,s=n.selection.startColumn;else{const o=n.position.delta(void 0,-(i-1)),u=t.normalizePosition(c.clipPositionColumn(o,t),0),a=c.left(e,t,u);r=a.lineNumber,s=a.column}return n.move(o,r,s,0)}static clipPositionColumn(e,t){return new r.L(e.lineNumber,c.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n+=u.vH(e.getLineContent(t),n-1):t<e.getLineCount()&&(t+=1,n=e.getLineMinColumn(t)),new r.L(t,n)}static rightPositionAtomicSoftTabs(e,t,n,o,i){if(n<e.getLineIndentColumn(t)){const i=e.getLineContent(t),s=a.l.atomicPosition(i,n-1,o,1);if(-1!==s)return new r.L(t,s+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const o=e.stickyTabStops?c.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):c.rightPosition(t,n.lineNumber,n.column);return new l(o.lineNumber,o.column,0)}static moveRight(e,t,n,o,i){let r,s;if(n.hasSelection()&&!o)r=n.selection.endLineNumber,s=n.selection.endColumn;else{const o=n.position.delta(void 0,i-1),u=t.normalizePosition(c.clipPositionColumn(o,t),1),a=c.right(e,t,u);r=a.lineNumber,s=a.column}return n.move(o,r,s,0)}static vertical(e,t,n,o,s,u,a,c){const d=i.i.visibleColumnFromColumn(t.getLineContent(n),o,e.tabSize)+s,m=t.getLineCount(),p=1===n&&1===o,g=n===m&&o===t.getLineMaxColumn(n),h=u<n?p:g;if((n=u)<1?(n=1,o=a?t.getLineMinColumn(n):Math.min(t.getLineMaxColumn(n),o)):n>m?(n=m,o=a?t.getLineMaxColumn(n):Math.min(t.getLineMaxColumn(n),o)):o=e.columnFromVisibleColumn(t,n,d),s=h?0:d-i.i.visibleColumnFromColumn(t.getLineContent(n),o,e.tabSize),void 0!==c){const e=new r.L(n,o),i=t.normalizePosition(e,c);s+=o-i.column,n=i.lineNumber,o=i.column}return new l(n,o,s)}static down(e,t,n,o,i,r,s){return this.vertical(e,t,n,o,i,n+r,s,4)}static moveDown(e,t,n,o,i){let r,s;n.hasSelection()&&!o?(r=n.selection.endLineNumber,s=n.selection.endColumn):(r=n.position.lineNumber,s=n.position.column);const u=c.down(e,t,r,s,n.leftoverVisibleColumns,i,!0);return n.move(o,u.lineNumber,u.column,u.leftoverVisibleColumns)}static translateDown(e,t,n){const i=n.selection,u=c.down(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),a=c.down(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new o.rS(new s.e(u.lineNumber,u.column,u.lineNumber,u.column),u.leftoverVisibleColumns,new r.L(a.lineNumber,a.column),a.leftoverVisibleColumns)}static up(e,t,n,o,i,r,s){return this.vertical(e,t,n,o,i,n-r,s,3)}static moveUp(e,t,n,o,i){let r,s;n.hasSelection()&&!o?(r=n.selection.startLineNumber,s=n.selection.startColumn):(r=n.position.lineNumber,s=n.position.column);const u=c.up(e,t,r,s,n.leftoverVisibleColumns,i,!0);return n.move(o,u.lineNumber,u.column,u.leftoverVisibleColumns)}static translateUp(e,t,n){const i=n.selection,u=c.up(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),a=c.up(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new o.rS(new s.e(u.lineNumber,u.column,u.lineNumber,u.column),u.leftoverVisibleColumns,new r.L(a.lineNumber,a.column),a.leftoverVisibleColumns)}static _isBlankLine(e,t){return 0===e.getLineFirstNonWhitespaceColumn(t)}static moveToPrevBlankLine(e,t,n,o){let i=n.position.lineNumber;for(;i>1&&this._isBlankLine(t,i);)i--;for(;i>1&&!this._isBlankLine(t,i);)i--;return n.move(o,i,t.getLineMinColumn(i),0)}static moveToNextBlankLine(e,t,n,o){const i=t.getLineCount();let r=n.position.lineNumber;for(;r<i&&this._isBlankLine(t,r);)r++;for(;r<i&&!this._isBlankLine(t,r);)r++;return n.move(o,r,t.getLineMinColumn(r),0)}static moveToBeginningOfLine(e,t,n,o){const i=n.position.lineNumber,r=t.getLineMinColumn(i),s=t.getLineFirstNonWhitespaceColumn(i)||r;let u;return u=n.position.column===s?r:s,n.move(o,i,u,0)}static moveToEndOfLine(e,t,n,o,i){const r=n.position.lineNumber,s=t.getLineMaxColumn(r);return n.move(o,r,s,i?1073741824-s:0)}static moveToBeginningOfBuffer(e,t,n,o){return n.move(o,1,1,0)}static moveToEndOfBuffer(e,t,n,o){const i=t.getLineCount(),r=t.getLineMaxColumn(i);return n.move(o,i,r,0)}}},1336:(e,t,n)=>{n.d(t,{Nu:()=>b,u6:()=>w,g_:()=>L});var o=n(7301),i=n(7295),r=n(1329),s=n(291),u=n(4314),a=n(3860);class l{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new u.e(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new u.e(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const n=t.getInverseEditOperations(),o=n[0].range,i=n[1].range;return new a.Y(o.endLineNumber,o.endColumn,i.endLineNumber,i.endColumn-this._charAfterSelection.length)}}class c{constructor(e,t,n){this._position=e,this._text=t,this._charAfter=n}getEditOperations(e,t){t.addTrackedEditOperation(new u.e(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return new a.Y(n.endLineNumber,n.startColumn,n.endLineNumber,n.endColumn-this._charAfter.length)}}var d=n(5343),m=n(4929),p=n(187),g=n(9119),h=n(1381),f=n(9111),C=n(5383),S=n(1615);class w{static indent(e,t,n){if(null===t||null===n)return[];const o=[];for(let t=0,i=n.length;t<i;t++)o[t]=new s.U(n[t],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return o}static outdent(e,t,n){const o=[];for(let t=0,i=n.length;t<i;t++)o[t]=new s.U(n[t],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return o}static shiftIndent(e,t,n){return n=n||1,s.U.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,s.U.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,o){const i=[];for(let e=0,t=n.length;e<t;e++)i[e]=new r.T4(n[e],o[e]);return new d.Tp(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,o,i){const s=[];for(let e=0,t=n.length;e<t;e++){const t=n[e],a=t.getPosition();if(i&&!t.isEmpty()&&(i=!1),i&&o.indexOf("\n")!==o.length-1&&(i=!1),i){const n=new u.e(a.lineNumber,1,a.lineNumber,1);s[e]=new r.hP(n,o,t,!0)}else s[e]=new r.T4(t,o)}return new d.Tp(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,o,r){if(o)return null;if(1===t.length)return null;if(r&&r.length===t.length)return r;if("spread"===e.multiCursorPaste){10===n.charCodeAt(n.length-1)&&(n=n.substr(0,n.length-1)),13===n.charCodeAt(n.length-1)&&(n=n.substr(0,n.length-1));const e=i.uq(n);if(e.length===t.length)return e}return null}static paste(e,t,n,o,i,r){const s=this._distributePasteToCursors(e,n,o,i,r);return s?(n=n.sort(u.e.compareRangesUsingStarts),this._distributedPaste(e,t,n,s)):this._simplePaste(e,t,n,o,i)}static _goodIndentForLine(e,t,n){let o=null,r="";const s=(0,C.r7)(e.autoIndent,t,n,!1,e.languageConfigurationService);if(s)o=s.action,r=s.indentation;else if(n>1){let o;for(o=n-1;o>=1;o--){const e=t.getLineContent(o);if(i.ow(e)>=0)break}if(o<1)return null;const s=t.getLineMaxColumn(o),a=(0,S.A)(e.autoIndent,t,new u.e(o,s,o,s),e.languageConfigurationService);a&&(r=a.indentation+a.appendText)}return o&&(o===g.wU.Indent&&(r=w.shiftIndent(e,r)),o===g.wU.Outdent&&(r=w.unshiftIndent(e,r)),r=e.normalizeIndentation(r)),r||null}static _replaceJumpToNextIndent(e,t,n,o){let i="";const s=n.getStartPosition();if(e.insertSpaces){const n=e.visibleColumnFromColumn(t,s),o=e.indentSize,r=o-n%o;for(let e=0;e<r;e++)i+=" "}else i="\t";return new r.T4(n,i,o)}static tab(e,t,n){const o=[];for(let i=0,a=n.length;i<a;i++){const a=n[i];if(a.isEmpty()){const n=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(n)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let s=this._goodIndentForLine(e,t,a.startLineNumber);s=s||"\t";const l=e.normalizeIndentation(s);if(!n.startsWith(l)){o[i]=new r.T4(new u.e(a.startLineNumber,1,a.startLineNumber,n.length+1),l,!0);continue}}o[i]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const n=t.getLineMaxColumn(a.startLineNumber);if(1!==a.startColumn||a.endColumn!==n){o[i]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}o[i]=new s.U(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return o}static compositionType(e,t,n,o,i,r,s,u){const a=o.map((e=>this._compositionType(n,e,i,r,s,u)));return new d.Tp(4,a,{shouldPushStackElementBefore:N(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,o,i,s){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-o),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+i),d=new u.e(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(d)===n&&0===s?null:new r.Uo(d,n,0,s)}static _typeCommand(e,t,n){return n?new r.Sj(e,t,!0):new r.T4(e,t,!0)}static _enter(e,t,n,o){if(0===e.autoIndent)return w._typeCommand(o,"\n",n);if(!t.tokenization.isCheapToTokenize(o.getStartPosition().lineNumber)||1===e.autoIndent){const r=t.getLineContent(o.startLineNumber),s=i.V8(r).substring(0,o.startColumn-1);return w._typeCommand(o,"\n"+e.normalizeIndentation(s),n)}const s=(0,S.A)(e.autoIndent,t,o,e.languageConfigurationService);if(s){if(s.indentAction===g.wU.None)return w._typeCommand(o,"\n"+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===g.wU.Indent)return w._typeCommand(o,"\n"+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===g.wU.IndentOutdent){const t=e.normalizeIndentation(s.indentation),i=e.normalizeIndentation(s.indentation+s.appendText),u="\n"+i+"\n"+t;return n?new r.Sj(o,u,!0):new r.Uo(o,u,-1,i.length-t.length,!0)}if(s.indentAction===g.wU.Outdent){const t=w.unshiftIndent(e,s.indentation);return w._typeCommand(o,"\n"+e.normalizeIndentation(t+s.appendText),n)}}const u=t.getLineContent(o.startLineNumber),a=i.V8(u).substring(0,o.startColumn-1);if(e.autoIndent>=4){const s=(0,C.UF)(e.autoIndent,t,o,{unshiftIndent:t=>w.unshiftIndent(e,t),shiftIndent:t=>w.shiftIndent(e,t),normalizeIndentation:t=>e.normalizeIndentation(t)},e.languageConfigurationService);if(s){let u=e.visibleColumnFromColumn(t,o.getEndPosition());const a=o.endColumn,l=t.getLineContent(o.endLineNumber),c=i.LC(l);if(o=c>=0?o.setEndPosition(o.endLineNumber,Math.max(o.endColumn,c+1)):o.setEndPosition(o.endLineNumber,t.getLineMaxColumn(o.endLineNumber)),n)return new r.Sj(o,"\n"+e.normalizeIndentation(s.afterEnter),!0);{let t=0;return a<=c+1&&(e.insertSpaces||(u=Math.ceil(u/e.indentSize)),t=Math.min(u+1-e.normalizeIndentation(s.afterEnter).length-1,0)),new r.Uo(o,"\n"+e.normalizeIndentation(s.afterEnter),0,t,!0)}}}return w._typeCommand(o,"\n"+e.normalizeIndentation(a),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let e=0,o=n.length;e<o;e++)if(!t.tokenization.isCheapToTokenize(n[e].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,o){const i=(0,h.u0)(t,n.startLineNumber,n.startColumn),r=(0,C.$9)(e.autoIndent,t,n,o,{shiftIndent:t=>w.shiftIndent(e,t),unshiftIndent:t=>w.unshiftIndent(e,t)},e.languageConfigurationService);if(null===r)return null;if(r!==e.normalizeIndentation(i)){const i=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return 0===i?w._typeCommand(new u.e(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(r)+o,!1):w._typeCommand(new u.e(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(r)+t.getLineContent(n.startLineNumber).substring(i-1,n.startColumn-1)+o,!1)}return null}static _isAutoClosingOvertype(e,t,n,o,i){if("never"===e.autoClosingOvertype)return!1;if(!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(i))return!1;for(let r=0,s=n.length;r<s;r++){const s=n[r];if(!s.isEmpty())return!1;const u=s.getPosition(),a=t.getLineContent(u.lineNumber);if(a.charAt(u.column-1)!==i)return!1;const l=(0,d.LN)(i);if(92===(u.column>2?a.charCodeAt(u.column-2):0)&&l)return!1;if("auto"===e.autoClosingOvertype){let e=!1;for(let t=0,n=o.length;t<n;t++){const n=o[t];if(u.lineNumber===n.startLineNumber&&u.column===n.startColumn){e=!0;break}}if(!e)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,o,i){const s=[];for(let e=0,t=o.length;e<t;e++){const t=o[e].getPosition(),n=new u.e(t.lineNumber,t.column,t.lineNumber,t.column+1);s[e]=new r.T4(n,i)}return new d.Tp(4,s,{shouldPushStackElementBefore:N(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),o=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],i=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],r=o.some((e=>t.startsWith(e.open))),s=i.some((e=>t.startsWith(e.close)));return!r&&s}static _findAutoClosingPairOpen(e,t,n,o){const i=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(o);if(!i)return null;let r=null;for(const e of i)if(null===r||e.open.length>r.open.length){let i=!0;for(const r of n){if(t.getValueInRange(new u.e(r.lineNumber,r.column-e.open.length+1,r.lineNumber,r.column))+o!==e.open){i=!1;break}}i&&(r=e)}return r}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),o=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let i=null;for(const e of o)e.open!==t.open&&t.open.includes(e.open)&&t.close.endsWith(e.close)&&(!i||e.open.length>i.open.length)&&(i=e);return i}static _getAutoClosingPairClose(e,t,n,o,i){const r=(0,d.LN)(o),s=r?e.autoClosingQuotes:e.autoClosingBrackets,u=r?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;if("never"===s)return null;for(const e of n)if(!e.isEmpty())return null;const a=n.map((e=>{const t=e.getPosition();return i?{lineNumber:t.lineNumber,beforeColumn:t.column-o.length,afterColumn:t.column}:{lineNumber:t.lineNumber,beforeColumn:t.column,afterColumn:t.column}})),l=this._findAutoClosingPairOpen(e,t,a.map((e=>new p.L(e.lineNumber,e.beforeColumn))),o);if(!l)return null;const c=this._findContainedAutoClosingPair(e,l),g=c?c.close:"";let h=!0;for(const n of a){const{lineNumber:i,beforeColumn:r,afterColumn:a}=n,c=t.getLineContent(i),d=c.substring(0,r-1),p=c.substring(a-1);if(p.startsWith(g)||(h=!1),p.length>0){const t=p.charAt(0);if(!w._isBeforeClosingBrace(e,p)&&!u(t))return null}if(1===l.open.length&&("'"===o||'"'===o)&&"always"!==s){const t=(0,m.u)(e.wordSeparators);if(d.length>0){const e=d.charCodeAt(d.length-1);if(0===t.get(e))return null}}if(!t.tokenization.isCheapToTokenize(i))return null;t.tokenization.forceTokenization(i);const C=t.tokenization.getLineTokens(i),S=(0,f.wH)(C,r-1);if(!l.shouldAutoClose(S,r-S.firstCharOffset))return null;const L=l.findNeutralCharacter();if(L){const e=t.tokenization.getTokenTypeIfInsertingCharacter(i,r,L);if(!l.isOK(e))return null}}return h?l.close.substring(0,l.close.length-g.length):l.close}static _runAutoClosingOpenCharType(e,t,n,o,i,r,s){const u=[];for(let e=0,t=o.length;e<t;e++){const t=o[e];u[e]=new L(t,i,!r,s)}return new d.Tp(4,u,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return(0,d.LN)(t)?"quotes"===e.autoSurround||"languageDefined"===e.autoSurround:"brackets"===e.autoSurround||"languageDefined"===e.autoSurround}static _isSurroundSelectionType(e,t,n,o){if(!w._shouldSurroundChar(e,o)||!e.surroundingPairs.hasOwnProperty(o))return!1;const i=(0,d.LN)(o);for(const e of n){if(e.isEmpty())return!1;let n=!0;for(let o=e.startLineNumber;o<=e.endLineNumber;o++){const i=t.getLineContent(o),r=o===e.startLineNumber?e.startColumn-1:0,s=o===e.endLineNumber?e.endColumn-1:i.length,u=i.substring(r,s);if(/[^ \t]/.test(u)){n=!1;break}}if(n)return!1;if(i&&e.startLineNumber===e.endLineNumber&&e.startColumn+1===e.endColumn){const n=t.getValueInRange(e);if((0,d.LN)(n))return!1}}return!0}static _runSurroundSelectionType(e,t,n,o,i){const r=[];for(let e=0,n=o.length;e<n;e++){const n=o[e],s=t.surroundingPairs[i];r[e]=new l(n,i,s)}return new d.Tp(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!(1!==n.length||!t.tokenization.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,s,a){if(!t.electricChars.hasOwnProperty(a)||!s.isEmpty())return null;const l=s.getPosition();n.tokenization.forceTokenization(l.lineNumber);const c=n.tokenization.getLineTokens(l.lineNumber);let m;try{m=t.onElectricCharacter(a,c,l.column)}catch(e){return(0,o.dL)(e),null}if(!m)return null;if(m.matchOpenBracket){const o=(c.getLineContent()+a).lastIndexOf(m.matchOpenBracket)+1,s=n.bracketPairs.findMatchingBracketUp(m.matchOpenBracket,{lineNumber:l.lineNumber,column:o},500);if(s){if(s.startLineNumber===l.lineNumber)return null;const o=n.getLineContent(s.startLineNumber),c=i.V8(o),m=t.normalizeIndentation(c),p=n.getLineContent(l.lineNumber),g=n.getLineFirstNonWhitespaceColumn(l.lineNumber)||l.column,h=m+p.substring(g-1,l.column-1)+a,f=new u.e(l.lineNumber,1,l.lineNumber,l.column),C=new r.T4(f,h);return new d.Tp(v(h,e),[C],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,o,i,s){if(!o)return null;let a=null;for(const e of o)if(null===a)a=e.insertedText;else if(a!==e.insertedText)return null;if(!a||1!==a.length)return null;const l=a;let m=!1;for(const e of o)if(0!==e.deletedText.length){m=!0;break}if(m){if(!w._shouldSurroundChar(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const e=(0,d.LN)(l);for(const t of o){if(0!==t.deletedSelectionStart||t.deletedSelectionEnd!==t.deletedText.length)return null;if(/^[ \t]+$/.test(t.deletedText))return null;if(e&&(0,d.LN)(t.deletedText))return null}const n=[];for(const e of i){if(!e.isEmpty())return null;n.push(e.getPosition())}if(n.length!==o.length)return null;const r=[];for(let e=0,t=n.length;e<t;e++)r.push(new c(n[e],o[e].deletedText,l));return new d.Tp(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(t,n,i,s,l)){const e=i.map((e=>new r.T4(new u.e(e.positionLineNumber,e.positionColumn,e.positionLineNumber,e.positionColumn+1),"",!1)));return new d.Tp(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const p=this._getAutoClosingPairClose(t,n,i,l,!0);return null!==p?this._runAutoClosingOpenCharType(e,t,n,i,l,!0,p):null}static typeWithInterceptors(e,t,n,o,i,s,u){if(!e&&"\n"===u){const e=[];for(let t=0,r=i.length;t<r;t++)e[t]=w._enter(n,o,!1,i[t]);return new d.Tp(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,o,i)){const e=[];let t=!1;for(let r=0,s=i.length;r<s;r++)if(e[r]=this._runAutoIndentType(n,o,i[r],u),!e[r]){t=!0;break}if(!t)return new d.Tp(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(n,o,i,s,u))return this._runAutoClosingOvertype(t,n,o,i,u);if(!e){const e=this._getAutoClosingPairClose(n,o,i,u,!1);if(e)return this._runAutoClosingOpenCharType(t,n,o,i,u,!1,e)}if(!e&&this._isSurroundSelectionType(n,o,i,u))return this._runSurroundSelectionType(t,n,o,i,u);if(!e&&this._isTypeInterceptorElectricChar(n,o,i)){const e=this._typeInterceptorElectricChar(t,n,o,i[0],u);if(e)return e}const a=[];for(let e=0,t=i.length;e<t;e++)a[e]=new r.T4(i[e],u);const l=v(u,t);return new d.Tp(l,a,{shouldPushStackElementBefore:N(t,l),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,o,i){const s=[];for(let e=0,t=o.length;e<t;e++)s[e]=new r.T4(o[e],i);const u=v(i,e);return new d.Tp(u,s,{shouldPushStackElementBefore:N(e,u),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(null===t||null===n)return[];const o=[];for(let i=0,s=n.length;i<s;i++){let s=n[i].positionLineNumber;if(1===s)o[i]=new r.Sj(new u.e(1,1,1,1),"\n");else{s--;const n=t.getLineMaxColumn(s);o[i]=this._enter(e,t,!1,new u.e(s,n,s,n))}}return o}static lineInsertAfter(e,t,n){if(null===t||null===n)return[];const o=[];for(let i=0,r=n.length;i<r;i++){const r=n[i].positionLineNumber,s=t.getLineMaxColumn(r);o[i]=this._enter(e,t,!1,new u.e(r,s,r,s))}return o}static lineBreakInsert(e,t,n){const o=[];for(let i=0,r=n.length;i<r;i++)o[i]=this._enter(e,t,!0,n[i]);return o}}class L extends r.Uo{constructor(e,t,n,o){super(e,(n?t:"")+o,0,-o.length),this._openCharacter=t,this._closeCharacter=o,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new u.e(n.startLineNumber,n.endColumn-this._closeCharacter.length,n.endLineNumber,n.endColumn),this.enclosingRange=new u.e(n.startLineNumber,n.endColumn-this._openCharacter.length-this._closeCharacter.length,n.endLineNumber,n.endColumn),super.computeCursorState(e,t)}}class b{constructor(e,t,n,o,i,r){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=n,this.insertedText=o,this.insertedSelectionStart=i,this.insertedSelectionEnd=r}}function v(e,t){return" "===e?5===t||6===t?6:5:4}function N(e,t){return!(!P(e)||P(t))||5!==e&&_(e)!==_(t)}function _(e){return 6===e||5===e?"space":e}function P(e){return 4===e||5===e||6===e}},2896:(e,t,n)=>{n.d(t,{L:()=>c,w:()=>l});var o=n(7295),i=n(5343),r=n(9436),s=n(4929),u=n(187),a=n(4314);class l{static _createWord(e,t,n,o,i){return{start:o,end:i,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){const o=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(o,e,n)}static _doFindPreviousWordOnLine(e,t,n){let o=0;for(let i=n.column-2;i>=0;i--){const n=e.charCodeAt(i),r=t.get(n);if(0===r){if(2===o)return this._createWord(e,o,r,i+1,this._findEndOfWord(e,t,o,i+1));o=1}else if(2===r){if(1===o)return this._createWord(e,o,r,i+1,this._findEndOfWord(e,t,o,i+1));o=2}else if(1===r&&0!==o)return this._createWord(e,o,r,i+1,this._findEndOfWord(e,t,o,i+1))}return 0!==o?this._createWord(e,o,1,0,this._findEndOfWord(e,t,o,0)):null}static _findEndOfWord(e,t,n,o){const i=e.length;for(let r=o;r<i;r++){const o=e.charCodeAt(r),i=t.get(o);if(1===i)return r;if(1===n&&2===i)return r;if(2===n&&0===i)return r}return i}static _findNextWordOnLine(e,t,n){const o=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(o,e,n)}static _doFindNextWordOnLine(e,t,n){let o=0;const i=e.length;for(let r=n.column-1;r<i;r++){const n=e.charCodeAt(r),i=t.get(n);if(0===i){if(2===o)return this._createWord(e,o,i,this._findStartOfWord(e,t,o,r-1),r);o=1}else if(2===i){if(1===o)return this._createWord(e,o,i,this._findStartOfWord(e,t,o,r-1),r);o=2}else if(1===i&&0!==o)return this._createWord(e,o,i,this._findStartOfWord(e,t,o,r-1),r)}return 0!==o?this._createWord(e,o,1,this._findStartOfWord(e,t,o,i-1),i):null}static _findStartOfWord(e,t,n,o){for(let i=o;i>=0;i--){const o=e.charCodeAt(i),r=t.get(o);if(1===r)return i+1;if(1===n&&2===r)return i+1;if(2===n&&0===r)return i+1}return 0}static moveWordLeft(e,t,n,o){let i=n.lineNumber,r=n.column;1===r&&i>1&&(i-=1,r=t.getLineMaxColumn(i));let s=l._findPreviousWordOnLine(e,t,new u.L(i,r));if(0===o)return new u.L(i,s?s.start+1:1);if(1===o)return s&&2===s.wordType&&s.end-s.start==1&&0===s.nextCharClass&&(s=l._findPreviousWordOnLine(e,t,new u.L(i,s.start+1))),new u.L(i,s?s.start+1:1);if(3===o){for(;s&&2===s.wordType;)s=l._findPreviousWordOnLine(e,t,new u.L(i,s.start+1));return new u.L(i,s?s.start+1:1)}return s&&r<=s.end+1&&(s=l._findPreviousWordOnLine(e,t,new u.L(i,s.start+1))),new u.L(i,s?s.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(1===t.column)return n>1?new u.L(n-1,e.getLineMaxColumn(n-1)):t;const r=e.getLineContent(n);for(let e=t.column-1;e>1;e--){const t=r.charCodeAt(e-2),s=r.charCodeAt(e-1);if(95===t&&95!==s)return new u.L(n,e);if((o.mK(t)||o.T5(t))&&o.df(s))return new u.L(n,e);if(o.df(t)&&o.df(s)&&e+1<i){const t=r.charCodeAt(e);if(o.mK(t)||o.T5(t))return new u.L(n,e)}}return new u.L(n,1)}static moveWordRight(e,t,n,o){let i=n.lineNumber,r=n.column,s=!1;r===t.getLineMaxColumn(i)&&i<t.getLineCount()&&(s=!0,i+=1,r=1);let a=l._findNextWordOnLine(e,t,new u.L(i,r));if(2===o)a&&2===a.wordType&&a.end-a.start==1&&0===a.nextCharClass&&(a=l._findNextWordOnLine(e,t,new u.L(i,a.end+1))),r=a?a.end+1:t.getLineMaxColumn(i);else if(3===o){for(s&&(r=0);a&&(2===a.wordType||a.start+1<=r);)a=l._findNextWordOnLine(e,t,new u.L(i,a.end+1));r=a?a.start+1:t.getLineMaxColumn(i)}else a&&!s&&r>=a.start+1&&(a=l._findNextWordOnLine(e,t,new u.L(i,a.end+1))),r=a?a.start+1:t.getLineMaxColumn(i);return new u.L(i,r)}static _moveWordPartRight(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===i)return n<e.getLineCount()?new u.L(n+1,1):t;const r=e.getLineContent(n);for(let e=t.column+1;e<i;e++){const t=r.charCodeAt(e-2),s=r.charCodeAt(e-1);if(95!==t&&95===s)return new u.L(n,e);if((o.mK(t)||o.T5(t))&&o.df(s))return new u.L(n,e);if(o.df(t)&&o.df(s)&&e+1<i){const t=r.charCodeAt(e);if(o.mK(t)||o.T5(t))return new u.L(n,e)}}return new u.L(n,i)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-2,r=o.ow(n,i);return r+1<i?new a.e(t.lineNumber,r+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,o=e.model,i=e.selection,s=e.whitespaceHeuristics;if(!i.isEmpty())return i;if(r.A.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const t=e.selection.getPosition();return new a.e(t.lineNumber,t.column-1,t.lineNumber,t.column+1)}const c=new u.L(i.positionLineNumber,i.positionColumn);let d=c.lineNumber,m=c.column;if(1===d&&1===m)return null;if(s){const e=this._deleteWordLeftWhitespace(o,c);if(e)return e}let p=l._findPreviousWordOnLine(n,o,c);return 0===t?p?m=p.start+1:m>1?m=1:(d--,m=o.getLineMaxColumn(d)):(p&&m<=p.end+1&&(p=l._findPreviousWordOnLine(n,o,new u.L(d,p.start+1))),p?m=p.end+1:m>1?m=1:(d--,m=o.getLineMaxColumn(d))),new a.e(d,m,c.lineNumber,c.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const o=new u.L(n.positionLineNumber,n.positionColumn),i=this._deleteInsideWordWhitespace(t,o);return i||this._deleteInsideWordDetermineDeleteRange(e,t,o)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return 32===n||9===n}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),o=n.length;if(0===o)return null;let i=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,i))return null;let r=Math.min(t.column-1,o-1);if(!this._charAtIsWhitespace(n,r))return null;for(;i>0&&this._charAtIsWhitespace(n,i-1);)i--;for(;r+1<o&&this._charAtIsWhitespace(n,r+1);)r++;return new a.e(t.lineNumber,i+1,t.lineNumber,r+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const o=t.getLineContent(n.lineNumber),i=o.length;if(0===i)return n.lineNumber>1?new a.e(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new a.e(n.lineNumber,1,n.lineNumber+1,1):new a.e(n.lineNumber,1,n.lineNumber,1);const r=e=>e.start+1<=n.column&&n.column<=e.end+1,s=(e,t)=>(e=Math.min(e,n.column),t=Math.max(t,n.column),new a.e(n.lineNumber,e,n.lineNumber,t)),u=e=>{let t=e.start+1,n=e.end+1,r=!1;for(;n-1<i&&this._charAtIsWhitespace(o,n-1);)r=!0,n++;if(!r)for(;t>1&&this._charAtIsWhitespace(o,t-2);)t--;return s(t,n)},c=l._findPreviousWordOnLine(e,t,n);if(c&&r(c))return u(c);const d=l._findNextWordOnLine(e,t,n);return d&&r(d)?u(d):c&&d?s(c.end+1,d.start+1):c?s(c.start+1,c.end+1):d?s(d.start+1,d.end+1):s(1,i+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),o=l._moveWordPartLeft(e,n);return new a.e(n.lineNumber,n.column,o.lineNumber,o.column)}static _findFirstNonWhitespaceChar(e,t){const n=e.length;for(let o=t;o<n;o++){const t=e.charAt(o);if(" "!==t&&"\t"!==t)return o}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),o=t.column-1,i=this._findFirstNonWhitespaceChar(n,o);return o+1<i?new a.e(t.lineNumber,t.column,t.lineNumber,i+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,o=e.model,i=e.selection,r=e.whitespaceHeuristics;if(!i.isEmpty())return i;const s=new u.L(i.positionLineNumber,i.positionColumn);let c=s.lineNumber,d=s.column;const m=o.getLineCount(),p=o.getLineMaxColumn(c);if(c===m&&d===p)return null;if(r){const e=this._deleteWordRightWhitespace(o,s);if(e)return e}let g=l._findNextWordOnLine(n,o,s);return 2===t?g?d=g.end+1:d<p||c===m?d=p:(c++,g=l._findNextWordOnLine(n,o,new u.L(c,1)),d=g?g.start+1:o.getLineMaxColumn(c)):(g&&d>=g.start+1&&(g=l._findNextWordOnLine(n,o,new u.L(c,g.end+1))),g?d=g.start+1:d<p||c===m?d=p:(c++,g=l._findNextWordOnLine(n,o,new u.L(c,1)),d=g?g.start+1:o.getLineMaxColumn(c))),new a.e(c,d,s.lineNumber,s.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),o=l._moveWordPartRight(e,n);return new a.e(n.lineNumber,n.column,o.lineNumber,o.column)}static _createWordAtPosition(e,t,n){const o=new a.e(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(o),startColumn:o.startColumn,endColumn:o.endColumn}}static getWordAtPosition(e,t,n){const o=(0,s.u)(t),i=l._findPreviousWordOnLine(o,e,n);if(i&&1===i.wordType&&i.start<=n.column-1&&n.column-1<=i.end)return l._createWordAtPosition(e,n.lineNumber,i);const r=l._findNextWordOnLine(o,e,n);return r&&1===r.wordType&&r.start<=n.column-1&&n.column-1<=r.end?l._createWordAtPosition(e,n.lineNumber,r):null}static word(e,t,n,o,r){const c=(0,s.u)(e.wordSeparators),d=l._findPreviousWordOnLine(c,t,r),m=l._findNextWordOnLine(c,t,r);if(!o){let e,n;return d&&1===d.wordType&&d.start<=r.column-1&&r.column-1<=d.end?(e=d.start+1,n=d.end+1):m&&1===m.wordType&&m.start<=r.column-1&&r.column-1<=m.end?(e=m.start+1,n=m.end+1):(e=d?d.end+1:1,n=m?m.start+1:t.getLineMaxColumn(r.lineNumber)),new i.rS(new a.e(r.lineNumber,e,r.lineNumber,n),0,new u.L(r.lineNumber,n),0)}let p,g;d&&1===d.wordType&&d.start<r.column-1&&r.column-1<d.end?(p=d.start+1,g=d.end+1):m&&1===m.wordType&&m.start<r.column-1&&r.column-1<m.end?(p=m.start+1,g=m.end+1):(p=r.column,g=r.column);const h=r.lineNumber;let f;if(n.selectionStart.containsPosition(r))f=n.selectionStart.endColumn;else if(r.isBeforeOrEqual(n.selectionStart.getStartPosition())){f=p;const e=new u.L(h,f);n.selectionStart.containsPosition(e)&&(f=n.selectionStart.endColumn)}else{f=g;const e=new u.L(h,f);n.selectionStart.containsPosition(e)&&(f=n.selectionStart.startColumn)}return n.move(!0,h,f,0)}}class c extends l{static deleteWordPartLeft(e){const t=d([l.deleteWordLeft(e,0),l.deleteWordLeft(e,2),l._deleteWordPartLeft(e.model,e.selection)]);return t.sort(a.e.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=d([l.deleteWordRight(e,0),l.deleteWordRight(e,2),l._deleteWordPartRight(e.model,e.selection)]);return t.sort(a.e.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,n){const o=d([l.moveWordLeft(e,t,n,0),l.moveWordLeft(e,t,n,2),l._moveWordPartLeft(t,n)]);return o.sort(u.L.compare),o[2]}static moveWordPartRight(e,t,n){const o=d([l.moveWordRight(e,t,n,0),l.moveWordRight(e,t,n,2),l._moveWordPartRight(t,n)]);return o.sort(u.L.compare),o[0]}}function d(e){return e.filter((e=>Boolean(e)))}},5343:(e,t,n)=>{n.d(t,{LM:()=>m,LN:()=>S,Tp:()=>C,Vi:()=>p,rS:()=>f});var o=n(187),i=n(4314),r=n(3860),s=n(9111),u=n(7988),a=n(3158);const l=()=>!0,c=()=>!1,d=e=>" "===e||"\t"===e;class m{constructor(e,t,n,o){this.languageConfigurationService=o,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const i=n.options,r=i.get(133);this.readOnly=i.get(83),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=i.get(106),this.lineHeight=i.get(61),this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=i.get(118),this.wordSeparators=i.get(119),this.emptySelectionClipboard=i.get(33),this.copyWithSyntaxHighlighting=i.get(21),this.multiCursorMergeOverlapping=i.get(71),this.multiCursorPaste=i.get(73),this.autoClosingBrackets=i.get(5),this.autoClosingQuotes=i.get(8),this.autoClosingDelete=i.get(6),this.autoClosingOvertype=i.get(7),this.autoSurround=i.get(11),this.autoIndent=i.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const s=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(s)for(const e of s)this.surroundingPairs[e.open]=e.close}static shouldRecreate(e){return e.hasChanged(133)||e.hasChanged(119)||e.hasChanged(33)||e.hasChanged(71)||e.hasChanged(73)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(118)||e.hasChanged(61)||e.hasChanged(83)}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=null===(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)||void 0===e?void 0:e.getElectricCharacters();if(t)for(const e of t)this._electricChars[e]=!0}return this._electricChars}onElectricCharacter(e,t,n){const o=(0,s.wH)(t,n-1),i=this.languageConfigurationService.getLanguageConfiguration(o.languageId).electricCharacter;return i?i.onElectricCharacter(e,o,n-o.firstCharOffset):null}normalizeIndentation(e){return(0,a.x)(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t){switch(t){case"beforeWhitespace":return d;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e);case"always":return l;case"never":return c}}_getLanguageDefinedShouldAutoClose(e){const t=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet();return e=>-1!==t.indexOf(e)}visibleColumnFromColumn(e,t){return u.i.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,n){const o=u.i.columnFromVisibleColumn(e.getLineContent(t),n,this.tabSize),i=e.getLineMinColumn(t);if(o<i)return i;const r=e.getLineMaxColumn(t);return o>r?r:o}}class p{constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}static fromModelState(e){return new g(e)}static fromViewState(e){return new h(e)}static fromModelSelection(e){const t=r.Y.liftSelection(e),n=new f(i.e.fromPositions(t.getSelectionStart()),0,t.getPosition(),0);return p.fromModelState(n)}static fromModelSelections(e){const t=[];for(let n=0,o=e.length;n<o;n++)t[n]=this.fromModelSelection(e[n]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class g{constructor(e){this.modelState=e,this.viewState=null}}class h{constructor(e){this.modelState=null,this.viewState=e}}class f{constructor(e,t,n,o){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=n,this.leftoverVisibleColumns=o,this.selection=f._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,r){return e?new f(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new o.L(t,n),r):new f(new i.e(t,n,t,n),r,new o.L(t,n),r)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?r.Y.fromPositions(e.getStartPosition(),t):r.Y.fromPositions(e.getEndPosition(),t)}}class C{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}function S(e){return"'"===e||'"'===e||"`"===e}},5383:(e,t,n)=>{n.d(t,{$9:()=>c,UF:()=>l,n8:()=>a,r7:()=>u,tI:()=>d});var o=n(7295),i=n(9119),r=n(9111),s=n(1381);function u(e,t,n,r=!0,s){if(e<4)return null;const u=s.getLanguageConfiguration(t.tokenization.getLanguageId()).indentRulesSupport;if(!u)return null;if(n<=1)return{indentation:"",action:null};const a=function(e,t,n){const o=e.tokenization.getLanguageIdAtPosition(t,0);if(t>1){let i,r=-1;for(i=t-1;i>=1;i--){if(e.tokenization.getLanguageIdAtPosition(i,0)!==o)return r;const t=e.getLineContent(i);if(!n.shouldIgnore(t)&&!/^\s+$/.test(t)&&""!==t)return i;r=i}}return-1}(t,n,u);if(a<0)return null;if(a<1)return{indentation:"",action:null};const l=t.getLineContent(a);if(u.shouldIncrease(l)||u.shouldIndentNextLine(l))return{indentation:o.V8(l),action:i.wU.Indent,line:a};if(u.shouldDecrease(l))return{indentation:o.V8(l),action:null,line:a};{if(1===a)return{indentation:o.V8(t.getLineContent(a)),action:null,line:a};const e=a-1,n=u.getIndentMetadata(t.getLineContent(e));if(!(3&n)&&4&n){let n=0;for(let o=e-1;o>0;o--)if(!u.shouldIndentNextLine(t.getLineContent(o))){n=o;break}return{indentation:o.V8(t.getLineContent(n+1)),action:null,line:n+1}}if(r)return{indentation:o.V8(t.getLineContent(a)),action:null,line:a};for(let e=a;e>0;e--){const n=t.getLineContent(e);if(u.shouldIncrease(n))return{indentation:o.V8(n),action:i.wU.Indent,line:e};if(u.shouldIndentNextLine(n)){let n=0;for(let o=e-1;o>0;o--)if(!u.shouldIndentNextLine(t.getLineContent(e))){n=o;break}return{indentation:o.V8(t.getLineContent(n+1)),action:null,line:n+1}}if(u.shouldDecrease(n))return{indentation:o.V8(n),action:null,line:e}}return{indentation:o.V8(t.getLineContent(1)),action:null,line:1}}}function a(e,t,n,r,s,a){if(e<4)return null;const l=a.getLanguageConfiguration(n);if(!l)return null;const c=a.getLanguageConfiguration(n).indentRulesSupport;if(!c)return null;const d=u(e,t,r,void 0,a),m=t.getLineContent(r);if(d){const n=d.line;if(void 0!==n){const r=l.onEnter(e,"",t.getLineContent(n),"");if(r){let e=o.V8(t.getLineContent(n));return r.removeText&&(e=e.substring(0,e.length-r.removeText)),r.indentAction===i.wU.Indent||r.indentAction===i.wU.IndentOutdent?e=s.shiftIndent(e):r.indentAction===i.wU.Outdent&&(e=s.unshiftIndent(e)),c.shouldDecrease(m)&&(e=s.unshiftIndent(e)),r.appendText&&(e+=r.appendText),o.V8(e)}}return c.shouldDecrease(m)?d.action===i.wU.Indent?d.indentation:s.unshiftIndent(d.indentation):d.action===i.wU.Indent?s.shiftIndent(d.indentation):d.indentation}return null}function l(e,t,n,a,l){if(e<4)return null;t.tokenization.forceTokenization(n.startLineNumber);const c=t.tokenization.getLineTokens(n.startLineNumber),d=(0,r.wH)(c,n.startColumn-1),m=d.getLineContent();let p,g,h=!1;if(d.firstCharOffset>0&&c.getLanguageId(0)!==d.languageId?(h=!0,p=m.substr(0,n.startColumn-1-d.firstCharOffset)):p=c.getLineContent().substring(0,n.startColumn-1),n.isEmpty())g=m.substr(n.startColumn-1-d.firstCharOffset);else{g=(0,s.n2)(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-d.firstCharOffset)}const f=l.getLanguageConfiguration(d.languageId).indentRulesSupport;if(!f)return null;const C=p,S=o.V8(p),w={tokenization:{getLineTokens:e=>t.tokenization.getLineTokens(e),getLanguageId:()=>t.getLanguageId(),getLanguageIdAtPosition:(e,n)=>t.getLanguageIdAtPosition(e,n)},getLineContent:e=>e===n.startLineNumber?C:t.getLineContent(e)},L=o.V8(c.getLineContent()),b=u(e,w,n.startLineNumber+1,void 0,l);if(!b){const e=h?L:S;return{beforeEnter:e,afterEnter:e}}let v=h?L:b.indentation;return b.action===i.wU.Indent&&(v=a.shiftIndent(v)),f.shouldDecrease(g)&&(v=a.unshiftIndent(v)),{beforeEnter:h?L:S,afterEnter:v}}function c(e,t,n,o,r,a){if(e<4)return null;const l=(0,s.n2)(t,n.startLineNumber,n.startColumn);if(l.firstCharOffset)return null;const c=a.getLanguageConfiguration(l.languageId).indentRulesSupport;if(!c)return null;const d=l.getLineContent(),m=d.substr(0,n.startColumn-1-l.firstCharOffset);let p;if(n.isEmpty())p=d.substr(n.startColumn-1-l.firstCharOffset);else{p=(0,s.n2)(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-l.firstCharOffset)}if(!c.shouldDecrease(m+p)&&c.shouldDecrease(m+o+p)){const o=u(e,t,n.startLineNumber,!1,a);if(!o)return null;let s=o.indentation;return o.action!==i.wU.Indent&&(s=r.unshiftIndent(s)),s}return null}function d(e,t,n){const o=n.getLanguageConfiguration(e.getLanguageId()).indentRulesSupport;return o?t<1||t>e.getLineCount()?null:o.getIndentMetadata(e.getLineContent(t)):null}},1615:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(9119),i=n(1381);function r(e,t,n,r){const s=(0,i.n2)(t,n.startLineNumber,n.startColumn),u=r.getLanguageConfiguration(s.languageId);if(!u)return null;const a=s.getLineContent(),l=a.substr(0,n.startColumn-1-s.firstCharOffset);let c;if(n.isEmpty())c=a.substr(n.startColumn-1-s.firstCharOffset);else{c=(0,i.n2)(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-s.firstCharOffset)}let d="";if(n.startLineNumber>1&&0===s.firstCharOffset){const e=(0,i.n2)(t,n.startLineNumber-1);e.languageId===s.languageId&&(d=e.getLineContent())}const m=u.onEnter(e,d,l,c);if(!m)return null;const p=m.indentAction;let g=m.appendText;const h=m.removeText||0;g?p===o.wU.Indent&&(g="\t"+g):g=p===o.wU.Indent||p===o.wU.IndentOutdent?"\t":"";let f=(0,i.u0)(t,n.startLineNumber,n.startColumn);return h&&(f=f.substring(0,f.length-h)),{indentAction:p,appendText:g,removeText:h,indentation:f}}}}]);